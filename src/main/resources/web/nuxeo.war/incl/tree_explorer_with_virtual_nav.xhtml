<div xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:nxu="http://nuxeo.org/nxweb/util">

<div class="userClipboard">

<c:if test="false">
 DO NOT ajax enable this tree: it is useless and the tree must not be rerendered
 when other ajax requests happen on the page
</c:if>

  <h:panelGroup id="MultiTreeView" layout="block">

    <div class="tabsBar">
      <h:form id="virtualNavTreeTab">
        <nxu:dataList var="tree" layout="unorderedList" id="virtualNavTreeList"
          value="#{multiNavTreeManager.availableNavigationTrees}"
          itemStyleClass="#{nxu:test(multiNavTreeManager.selectedNavigationTree == tree.treeId, 'selected', '')}">
          <h:commandLink id="virtualNavTreeLink"
            immediate="true"
            action="#{multiNavTreeManager.setSelectedNavigationTree(tree.treeId)}">
            <f:ajax execute="@form" render="MultiTreeView" />
            <nxu:graphicImage value="/img/#{tree.treeId}.png"
              title="#{messages[tree.treeLabel]}"
              styleClass="smallIcon tipsyShow tipsyGravitySW" />
          </h:commandLink>
         </nxu:dataList>
      </h:form>
    </div>
    <div style="clear:both" />

    <div class="userClipboardContent">

      <c:if test="#{selectedNavigationTreeDescriptor.directoryTreeBased}">
        <ui:include src="/incl/single_directory_tree_explorer.xhtml">
          <ui:param name="treeModel" value="#{directoryTreeManager.selectedTreeAsList}" />
        </ui:include>
      </c:if>

      <c:if test="#{selectedNavigationTreeDescriptor.xhtmlview != null}">
        <ui:include src="#{selectedNavigationTreeDescriptor.xhtmlview}"/>
      </c:if>

    </div>

  </h:panelGroup>

</div>

</div>